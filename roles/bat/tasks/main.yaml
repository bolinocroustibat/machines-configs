- name: Install bat via Homebrew (MacOS)
  when: ansible_facts["os_family"] == 'Darwin'
  community.general.homebrew:
    name: bat
    state: present

- name: Install bat via apt (Debian)
  when: ansible_facts["os_family"] == 'Debian'
  become: true
  apt:
    name: bat
    state: present
    update_cache: true

# Uses user_home from host_vars - same as other roles (zsh, direnv, etc.)
- name: Ensure .zshrc exists for bat alias
  become: false
  file:
    path: "{{ user_home }}/.zshrc"
    state: touch

- name: Define zshrc alias for bat (replace cat) - macOS
  become: false
  blockinfile:
    path: "{{ user_home }}/.zshrc"
    marker: "# {mark} bat alias added by ansible"
    block: |
      alias cat='bat --style=plain --paging=never' # Disable paging and no lines numbers
  when: ansible_facts["os_family"] == 'Darwin'

- name: Define zshrc alias for batcat (replace cat) - Debian
  become: false
  blockinfile:
    path: "{{ user_home }}/.zshrc"
    marker: "# {mark} bat alias added by ansible"
    block: |
      alias cat='batcat --style=plain --paging=never' # Disable paging and no lines numbers
  when: ansible_facts["os_family"] == 'Debian'
